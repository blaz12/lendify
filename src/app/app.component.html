<div class="antialiased text-slate-700 bg-slate-50 min-h-screen">
  <div class="flex min-h-screen">
    
    <!-- Sidebar Navigation -->
    <!-- We use @if to only show the sidebar if the user is logged in -->
    @if (authService.currentUser()) {
      <aside class="w-64 bg-white shadow-md flex-shrink-0 flex flex-col">
        <div class="p-6 text-center border-b">
          <h1 class="text-2xl font-bold text-indigo-600">Lendify</h1>
          <p class="text-sm text-slate-500">Campus Equipment</p>
        </div>
        
        <!-- Navigation Links -->
        <nav class="p-4 flex-grow">
          <ul>
            <!-- We loop through our navigation items -->
            @for (item of navigationItems; track item.path) {
              <!-- We only show admin links if the user's role is 'admin' -->
              @if (!item.adminOnly || (item.adminOnly && authService.currentUser()?.role === 'admin')) {
                <li>
                  <a [routerLink]="item.path"
                     routerLinkActive="bg-indigo-100 text-indigo-600"
                     class="flex items-center p-3 my-1 rounded-lg cursor-pointer hover:bg-indigo-50 transition-colors">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="item.icon"></path>
                    </svg>
                    <span>{{ item.label }}</span>
                  </a>
                </li>
              }
            }
          </ul>
        </nav>
        
        <!-- User Info & Logout Button -->
        <div class="p-4 border-t">
          <div class="flex items-center">
            <div class="w-10 h-10 bg-indigo-200 rounded-full flex items-center justify-center font-bold text-indigo-600">
              {{ authService.currentUser()?.name?.charAt(0) }}
            </div>
            <div class="ml-3">
              <p class="font-semibold text-sm">{{ authService.currentUser()?.name }}</p>
              <p class="text-xs text-slate-500">{{ authService.currentUser()?.studentId }}</p>
            </div>
          </div>
          <button (click)="authService.logout()" class="w-full mt-4 text-sm text-center p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors">
            Logout
          </button>
        </div>
      </aside>
    }

    <!-- Main Content Area -->
    <main class="flex-1 p-8 overflow-y-auto">
      <!-- This is where the router will insert the active component (e.g., Auth, Dashboard) -->
      <router-outlet></router-outlet>
    </main>

    <!-- Notification (We'll add this later) -->
    <!-- <app-notification></app-notification> -->

  </div>
</div>
